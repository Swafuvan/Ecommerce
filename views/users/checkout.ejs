<%- include('header') %>

    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="/" rel="nofollow">Home</a>
                    <span></span> Shop
                    <span></span> Checkout
                </div>
            </div>
        </div>
        <section class="mt-50 mb-50">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <% if(couponamount==='' ) { %>
                            <div class="toggle_info">
                                <span><i class="fi-rs-label mr-10"></i><span class="text-muted">Have a coupon?</span> <a
                                        href="#coupon" data-bs-toggle="collapse" class="collapsed"
                                        aria-expanded="false">Click here to enter your code</a></span>
                            </div>
                            <div class="panel-collapse collapse coupon_form " id="coupon">
                                <div class="panel-body">
                                    <p class="mb-30 font-sm">If you have a coupon code, please apply it below.</p>
                                    <h4>Apply Coupon With Capital Letters</h4><br>
                                    <form method="post" action="#" onsubmit="return false">
                                        <div class="form-group">
                                            <input type="text" value="" id="couponfield" name="coupon"
                                                placeholder="Enter Coupon Code...">
                                            <span id="couponErr" class="text-danger"></span>
                                        </div>
                                        <div class="form-group">
                                            <button class="btn  btn-md" id="couponButton">Apply Coupon</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <% } else { %>
                                <div class="toggle_info mb-20">
                                    <span><i class="fi-rs-label mr-10"></i><span class="text-muted">Have a
                                            coupon?</span> <a href="#coupon" data-bs-toggle="collapse" class="collapsed"
                                            aria-expanded="false">Coupon Used</a></span>
                                </div>
                                <button class="btn p-2" onclick="removecoupon()">Remove coupon</button>
                                <% } %>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="divider mt-50 mb-50"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-25">
                            <h4>Billing Details</h4>

                        </div>
                        <% if(Addressdata){ %>
                            <% if(Addressdata.userAddress.length < 3 ){ %>
                                <div class="col-md-6 mb-20">
                                    <button class="btn rounded" data-bs-toggle="modal"
                                        data-bs-target="#exampleModal334">New
                                        Address</button>
                                </div>
                                <% } %>


                                    <div class="row">

                                        <% if(Addressdata && Addressdata.userAddress.length>0){ %>

                                            <% Addressdata.userAddress.forEach((item,index)=>{ %>

                                                <div class="col-lg-12">
                                                    <div class="card mb-20">
                                                        <% if(item.addressType==='temp' ){ %>

                                                            <div class="card-header d-flex">
                                                                <h5 class="mb-0" style="display: inline;">Temporary
                                                                    Address</h5>
                                                                <input type="radio" value="Temp"
                                                                    class="form-check-input float-left"
                                                                    onchange="activatebtn(this)" id="address"
                                                                    name="address" style="margin-left: 310px;">
                                                                <a class=" p-0 ml-15" data-bs-toggle="modal"
                                                                    data-bs-target="#exampleModal123"><i
                                                                        class="fas fa-edit"></i></a>
                                                            </div>
                                                            <% }else if(item.addressType==='home' ){ %>

                                                                <div class="card-header d-flex">
                                                                    <h5 class="mb-0" style="display: inline;">Home
                                                                        Address</h5>
                                                                    <input type="radio" value="Home"
                                                                        onchange="activatebtn(this)"
                                                                        class="form-check-input float-left"
                                                                        id="address1" name="address"
                                                                        style="margin-left: 350px;">
                                                                    <a class=" p-0 ml-15" data-bs-toggle="modal"
                                                                        data-bs-target="#exampleModal123"><i
                                                                            class="fas fa-edit"></i></a>
                                                                </div>


                                                                <% }else{ %>

                                                                    <div class="card-header d-flex">
                                                                        <h5 class="mb-0" style="display: inline;">Work
                                                                            Address</h5>
                                                                        <input type="radio" value="Work"
                                                                            onchange="activatebtn(this)"
                                                                            class="form-check-input float-left"
                                                                            id="address2" name="address"
                                                                            style="margin-left: 350px;">
                                                                        <a class=" p-0 ml-15" data-bs-toggle="modal"
                                                                            data-bs-target="#exampleModal123"><i
                                                                                class="fas fa-edit"></i></a>
                                                                    </div>

                                                                    <% } %>
                                                                        <div class="card-body">
                                                                            <address>
                                                                                <%= item.Firstname %>,<br>
                                                                                    <%= item.phone %>, <%= item.Street
                                                                                            %><br>
                                                                                            <%= item.HouseNo %>, <%=
                                                                                                    item.City %>,
                                                                                                    <%= item.State %>
                                                                                                        <br>
                                                                                                        <%= item.Pincode
                                                                                                            %>,
                                                                                                            <%= item.district
                                                                                                                %><br>
                                                                            </address>
                                                                            <p>
                                                                                <%= item.Country %>
                                                                            </p>
                                                                        </div>

                                                    </div>
                                                </div>




                                                <% }) %>
                                                    <% }else{ %>
                                                        <div class="col-lg-12">
                                                            <h5>Not Address Found</h5>
                                                        </div>
                                                        <% } %>

                                                            <% }else{ %>
                                                                <div class="col-md-6 mb-20">
                                                                    <button class="btn rounded" data-bs-toggle="modal"
                                                                        data-bs-target="#exampleModal334">New
                                                                        Address</button>
                                                                </div>
                                                                <% } %>
                                                                    <!-- Modal for Editing Address -->
                                                                    <div class="modal fade" id="exampleModal334"
                                                                        tabindex="-1"
                                                                        aria-labelledby="exampleModalLabel334"
                                                                        aria-hidden="true">
                                                                        <div class="modal-dialog">
                                                                            <div
                                                                                class="modal-content modal-dialog-scrollable">
                                                                                <div class="modal-header">
                                                                                    <h5 class="modal-title"
                                                                                        id="addressModalLabel">Add
                                                                                        Address</h5>
                                                                                    <button type="button"
                                                                                        class="btn-close"
                                                                                        data-bs-dismiss="modal"
                                                                                        aria-label="Close"></button>
                                                                                    </button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    <!-- Your form content goes here -->
                                                                                    <form id="addressForm"
                                                                                        action="/addAddress1"
                                                                                        method="post"
                                                                                        onsubmit="return validationAddress()">
                                                                                        <!-- Form fields for address details -->
                                                                                        <div class="form-group mb-3">
                                                                                            <label
                                                                                                for="addressType">Address
                                                                                                Type</label>
                                                                                            <select class="form-control"
                                                                                                id="addressType"
                                                                                                name="addressType">
                                                                                                <option name="home"
                                                                                                    value="home">Home
                                                                                                </option>
                                                                                                <option name="work"
                                                                                                    value="work">Work
                                                                                                </option>
                                                                                                <option name="temp"
                                                                                                    value="temp">
                                                                                                    Temporary</option>
                                                                                            </select>
                                                                                            <span id="addressTypeError"
                                                                                                class="text-danger"></span>
                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label
                                                                                                for="Firstname">Firstname</label>
                                                                                            <input name="Firstname"
                                                                                                type="text"
                                                                                                class="form-control"
                                                                                                id="Firstname"
                                                                                                placeholder="Firstname">
                                                                                            <span id="FirstnameError"
                                                                                                class="text-danger"></span>
                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label
                                                                                                for="Lastname">Lastname</label>
                                                                                            <input name="Lastname"
                                                                                                type="text"
                                                                                                class="form-control"
                                                                                                id="Lastname"
                                                                                                placeholder="Lastname">
                                                                                            <span id="LastnameError"
                                                                                                class="text-danger"></span>
                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label for="houseNo">House
                                                                                                No</label>
                                                                                            <input name="HouseNo"
                                                                                                type="text"
                                                                                                class="form-control"
                                                                                                id="houseNo"
                                                                                                placeholder="House Number">
                                                                                            <span id="houseNoError"
                                                                                                class="text-danger"></span>
                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label
                                                                                                for="street">Street</label>
                                                                                            <input name="Street"
                                                                                                type="text"
                                                                                                class="form-control"
                                                                                                id="street"
                                                                                                placeholder="Street">
                                                                                            <span id="streetError"
                                                                                                class="text-danger"></span>
                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label
                                                                                                for="landmark">Landmark</label>
                                                                                            <input name="Landmark"
                                                                                                type="text"
                                                                                                class="form-control"
                                                                                                id="landmark"
                                                                                                placeholder="Landmark">

                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label
                                                                                                for="pincode">Pincode</label>
                                                                                            <input name="Pincode"
                                                                                                type="number"
                                                                                                class="form-control"
                                                                                                id="pincode"
                                                                                                placeholder="Pincode">
                                                                                            <span id="pincodeError"
                                                                                                class="text-danger"></span>
                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label
                                                                                                for="city">City</label>
                                                                                            <input name="City"
                                                                                                type="text"
                                                                                                class="form-control"
                                                                                                id="city"
                                                                                                placeholder="City">
                                                                                            <span id="cityError"
                                                                                                class="text-danger"></span>
                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label
                                                                                                for="district">District</label>
                                                                                            <input name="district"
                                                                                                type="text"
                                                                                                class="form-control"
                                                                                                id="district"
                                                                                                placeholder="district">
                                                                                            <span id="districtError"
                                                                                                class="text-danger"></span>
                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label for="state"
                                                                                                class="mb-2 d-block">State</label>
                                                                                            <input type="text"
                                                                                                name="State"
                                                                                                class="form-control"
                                                                                                id="State"
                                                                                                placeholder="State">
                                                                                            <span id="stateError"
                                                                                                class="text-danger"></span>

                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label
                                                                                                for="country">Country</label>
                                                                                            <input name="Country"
                                                                                                type="text"
                                                                                                class="form-control"
                                                                                                id="country"
                                                                                                placeholder="Country">
                                                                                            <span id="countryError"
                                                                                                class="text-danger"></span>
                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label for="phone">phone
                                                                                                number</label>
                                                                                            <input name="phone"
                                                                                                type="text"
                                                                                                class="form-control"
                                                                                                id="phone"
                                                                                                placeholder="phone number">
                                                                                            <span id="phoneError"
                                                                                                class="text-danger"></span>
                                                                                        </div>
                                                                                        <div class="form-group mb-3">
                                                                                            <label
                                                                                                for="email">Email</label>
                                                                                            <input name="email"
                                                                                                type="text"
                                                                                                class="form-control"
                                                                                                id="email"
                                                                                                placeholder="Email">
                                                                                            <span id="emailError"
                                                                                                class="text-danger"></span>
                                                                                        </div>

                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-bs-dismiss="modal">Close</button>
                                                                                    <button type="submit"
                                                                                        class="btn btn-primary">Save
                                                                                        changes</button>
                                                                                </div>
                                                                                </form>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                    </div>
                    </div>


                    <div class="col-md-6">
                        <div class="order_review">
                            <div class="mb-20">
                                <h4>Your Orders</h4>
                            </div>
                            <div class="table-responsive order_table text-center">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th colspan="2">Product</th>
                                            <th>Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                        <% cartdata.forEach((items,index)=>{ %>
                                            <tr>
                                                <td class="image product-thumbnail"><img
                                                        src="/productimage/<%= items.cartdetails[0].coverImages %>"
                                                        alt="image"></td>
                                                <td>
                                                    <h5>
                                                        <%= items.cartdetails[0].Name %>
                                                    </h5> <span class="product-qty">x<%= items.products.quantity %>
                                                    </span>
                                                </td>
                                                <td id="totalquantityprice_<%= items.products.productid %>">₹ <%=
                                                        array[index] %>
                                                </td>
                                            </tr>

                                            <% }) %>

                                                <tr>
                                                    <th>SubTotal</th>
                                                    <td class="product-subtotal" colspan="2">₹ <%= total %>
                                                    </td>
                                                </tr>

                                                <% if(couponamount){ %>
                                                    <tr>
                                                        <th>Discount</th>
                                                        <td class="product-subtotal" colspan="2">₹
                                                            <%= couponamount %>
                                                        </td>
                                                    </tr>
                                                    <% } %>
                                                        <tr>
                                                            <th>Shipping</th>
                                                            <td colspan="2"><em>Free Shipping</em>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th>Total</th>
                                                            <td colspan="2" class="product-subtotal"><span
                                                                    class="font-xl text-brand fw-900">₹
                                                                    <%= total + couponamount %>
                                                                </span>
                                                            </td>
                                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                            <div class="payment_method">
                                <div class="mb-25">
                                    <h5>Payment</h5>
                                </div>
                                <div class="payment_option">
                                    <div class="custome-radio">
                                        <input class="form-check-input" required="" value="Wallet" type="radio"
                                            name="payment_option" id="exampleRadios3" checked="">
                                        <label class="form-check-label" for="exampleRadios3" data-bs-toggle="collapse"
                                            data-target="#bankTranfer" aria-controls="bankTranfer">Wallet
                                            Transfer</label>
                                    </div>
                                    <div class="custome-radio">
                                        <input class="form-check-input" value="COD" required="" type="radio"
                                            name="payment_option" id="exampleRadios4" checked="">
                                        <label class="form-check-label" for="exampleRadios4" data-bs-toggle="collapse"
                                            data-target="#checkPayment" aria-controls="checkPayment">Cash on
                                            Delivery</label>

                                    </div>
                                    <div class="custome-radio">
                                        <input class="form-check-input" value="Bank Transfer" required="" type="radio"
                                            name="payment_option" id="exampleRadios5" checked="">
                                        <label class="form-check-label" for="exampleRadios5" data-bs-toggle="collapse"
                                            data-target="#paypal" aria-controls="paypal">Bank Transfer</label>

                                    </div>
                                </div>
                            </div>
                            <a id="placeorderbtns" style=" pointer-events: none;" onclick="placeorderbtn()"
                                class="btn btn-fill-out btn-block mt-30 ">Place Order</a>
                        </div>
                    </div>


                </div>
                <% Addressdata?.userAddress.forEach((item,index)=>{ %>
                <div class="modal fade" id="exampleModal123" tabindex="-1" aria-labelledby="exampleModalLabel334"
                    aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content modal-dialog-scrollable">
                            <div class="modal-header">
                                <h5 class="modal-title" id="addressModalLabel">Edit Address</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                                </button>
                            </div>
                            <div class="modal-body">
                                <!-- Your form content goes here -->
                                <form id="editaddressForm" action="/editAddress1" method="post"
                                    onsubmit="return validation2()">
                                    <!-- Form fields for address details -->
                                    <div class="form-group mb-3">
                                        <label for="addressType">Address
                                            Type</label>
                                        <input type="hidden" id="id" name="id" value="<%= item._id %>">
                                        <input type="hidden" id="index" name="index" value="<%= index %>">
                                        <select class="form-control" id="editAddressType"
                                            value="<%= item.addressType %>" name="addressType" required>
                                            <option value="home" name="home" <% if (item.addressType==='home' ) { %>
                                                selected<% } %>>
                                                    Home</option>
                                            <option value="work" name="work" <% if (item.addressType==='work' ) { %>
                                                selected<% } %>>
                                                    Work</option>
                                            <option value="temp" name="temp" <% if (item.addressType==='temp' ) { %>
                                                selected<% } %>>
                                                    Temporary</option>
                                        </select>
                                        <span id="addressTypeError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">

                                        <label for="Firstname">Firstname</label>
                                        <input type="text" class="form-control" id="editFirstname" name="Firstname"
                                            value="<%= item.Firstname %>" placeholder="Firstname">
                                        <span id="editfirstError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">

                                        <label for="Lastname">Lastname</label>
                                        <input type="text" class="form-control" id="editLastname" name="Lastname"
                                            value="<%= item.Lastname %>" placeholder="Lastname">
                                        <span id="editlastError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">

                                        <label for="houseNo">House
                                            No</label>
                                        <input type="text" class="form-control" id="editHouseNo" name="HouseNo"
                                            value="<%= item.HouseNo %>" placeholder="House Number">
                                        <span id="edithouseNoError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="street">Street</label>
                                        <input type="text" class="form-control" id="editStreet" name="Street"
                                            value="<%= item.Street %>" placeholder="Street">
                                        <span id="editstreetError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="landmark">Landmark</label>
                                        <input type="text" class="form-control" id="Landmark" name="Landmark"
                                            value="<%= item.Landmark%>" placeholder="Landmark">
                                        <span id="editLandmarkError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="pincode">Pincode</label>
                                        <input type="number" class="form-control" id="editpincode" name="Pincode"
                                            value="<%= item.Pincode %>" placeholder="Pincode">
                                        <span id="editpincodeError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="city">City</label>
                                        <input type="text" class="form-control" id="editcity" name="City"
                                            value="<%= item.City %>" placeholder="City">
                                        <span id="editcityError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="district">District</label>
                                        <input type="text" class="form-control" id="editdistrict"
                                            value="<%= item.district %>" name="district" placeholder="district">
                                        <span id="editdistrictError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="State" class="mb-2 d-block">State</label>
                                        <input type="text" name="State" id="editState" value="<%= item.State %>">
                                        <span id="editstateError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="country">Country</label>
                                        <input type="text" class="form-control" id="editcountry"
                                            value="<%= item.Country %>" name="Country" placeholder="Country">
                                        <span id="editcountryError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="country">Email</label>
                                        <input type="email" class="form-control" id="editemail"
                                            value="<%= item.email %>" name="email" placeholder="Email">
                                        <span id="editemailError" class="text-danger"></span>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="country">phone</label>
                                        <input type="tel" class="form-control" id="editphone" value="<%= item.phone %>"
                                            name="phone" placeholder="Phone number">
                                        <span id="editphoneError" class="text-danger"></span>
                                    </div>
                                    <!-- Other address fields here... -->

                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-primary">Save</button>
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            </div>
                            </form>
                        </div>
                    </div>

                    <div class="row">

                    </div>
                </div>
                <% }) %>
            </div>
        </section>
    </main>

    <%- include('footer') %>
        <script src="/javascripts/Razorpay.js"></script>
        <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
        <script>
            function activatebtn(rad) {

                let placeorderbtns = document.getElementById('placeorderbtns')
                if (rad.checked) {
                    placeorderbtns.style.pointerEvents = 'visible'
                } else {
                    placeorderbtns.style.pointerEvents = 'none'
                }
            }

            async function placeorderbtn() {
                let radiodata1 = document.getElementById('exampleRadios3')
                let radiodata2 = document.getElementById('exampleRadios4')
                let radiodata3 = document.getElementById('exampleRadios5')

                let checkedvalues = null
                if (radiodata1.checked) {
                    checkedvalues = radiodata1.value
                } else if (radiodata2.checked) {
                    checkedvalues = radiodata2.value
                } else if (radiodata3.checked) {
                    checkedvalues = radiodata3.value
                }

                let dataorder = await Swal.fire({
                    title: 'Order Confirmation',
                    text: "Are sure want Purchase this Product",
                    icon: 'success',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Yes'
                })
                if (dataorder.isConfirmed) {
                    let response = await fetch('/placeorder', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ checkedvalues })
                    })
                    if (response.ok) {
                        const responseData = await response.json();
                        let orderID = responseData.order
                        if (response.status === 200) {
                            Swal.fire(
                                'Order Confirmed',
                                'Your product is Added to Cart.',
                                'success'
                            ).then(() => {
                                location.href = '/confirmpage'
                            })
                        } else if (response.status === 201) {
                            razorpayfunction(responseData.order)
                        } else if (response.status === 203) {
                            Swal.fire(
                                'Order Confirmed',
                                'Your product is Added to Cart.',
                                'success'
                            ).then(() => {
                                location.href = `/confirmpage?id=${orderID}`
                            })
                        } else if (response.status === 208) {
                            Swal.fire(
                                'insufficient Balance',
                                'Your wallet have not enough Balance.',
                                'error'
                            )
                        }

                    }
                }

            }

            document.getElementById('couponButton').addEventListener('click', async (e) => {

                const coupon = document.getElementById('couponfield').value
                if (validation()) {
                    const response = await fetch('/couponverify', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ coupon })
                    })
                    if (response.status === 200) {
                        await Swal.fire(
                            'Verified!',
                            'Coupon Applied Successfully',
                            'success'
                        )
                        location.reload()
                    } else if (response.status === 201) {
                        Swal.fire(
                            'Sorry!',
                            'Coupon Already Used',
                            'warning'
                        )
                    } else if (response.status === 202) {
                        Swal.fire(
                            'Sorry!',
                            'Amount not enough to claim the coupon',
                            'warning'
                        )
                    } else {
                        Swal.fire(
                            'Error!',
                            'No coupon found.',
                            'error'
                        )
                    }
                }
            })

            function validation() {
                let check = true
                const data = document.getElementById('couponfield').value
                const dataerr = document.getElementById('couponErr')

                if (!data.trim()) {
                    dataerr.innerHTML = 'Enter a Coupon'
                    check = false
                }

                document.getElementById('couponfield').addEventListener('input', function () {
                    document.getElementById('couponErr').innerHTML = ""
                })
                return check
            }

            function validationAddress() {
                let valid = true
                const emailInput = document.getElementById('email').value
                const firstInput = document.getElementById('Firstname').value
                const lastInput = document.getElementById('Lastname').value
                const houseInput = document.getElementById('houseNo').value
                const streetInput = document.getElementById('street').value
                const landInput = document.getElementById('landmark').value
                const pinInput = document.getElementById('pincode').value
                const cityInput = document.getElementById('city').value
                const distInput = document.getElementById('district').value
                const stateInput = document.getElementById('State').value
                const countryInput = document.getElementById('country').value
                const phoneInput = document.getElementById('phone').value

                const emailMessage = document.getElementById('emailError');
                const firstMessage = document.getElementById('FirstnameError');
                const lstnameMessage = document.getElementById('LastnameError');
                const houseMessage = document.getElementById('houseNoError');
                const streetMessage = document.getElementById('streetError');
                const landMessage = document.getElementById('landError');
                const pinMessage = document.getElementById('pincodeError');
                const cityMessage = document.getElementById('cityError');
                const districtMessage = document.getElementById('districtError');
                const stateMessage = document.getElementById('stateError');
                const countryMessage = document.getElementById('countryError');
                const phoneMessage = document.getElementById('phoneError');

                emailMessage.textContent = '';
                firstMessage.textContent = '';
                lstnameMessage.textContent = '';
                houseMessage.textContent = '';
                streetMessage.textContent = '';
                landMessage.textContent = '';
                pinMessage.textContent = '';
                cityMessage.textContent = '';
                districtMessage.textContent = '';
                stateMessage.textContent = '';
                countryMessage.textContent = '';
                phoneMessage.textContent = '';

                if (!/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(emailInput)) {
                    emailMessage.textContent = ' enter a valid email address.';
                    valid = false
                }

                if (!/^\d{10}$/.test(phoneInput)) {
                    phoneMessage.textContent = 'Enter a valid 10-digit number.';
                    valid = false;
                }

                // Validate the password field
                if (lastInput.length > 10) {
                    lstnameMessage.textContent = 'your Lastname is Too Long.';
                    valid = false
                } else if (lastInput.trim() === '') {
                    lstnameMessage.textContent = 'Enter your Lastname.';
                    valid = false
                }
                if (firstInput.length > 15) {
                    firstMessage.textContent = 'your Firstname is Too Long.';
                    valid = false
                } else if (firstInput.trim() === '') {
                    firstMessage.textContent = 'Enter your Firstname.';
                    valid = false
                }

                if (houseInput.trim() === '') {
                    houseMessage.textContent = 'Enter your house/Building number.';
                    valid = false
                }
                if (streetInput.trim() === '') {
                    streetMessage.textContent = 'Enter the street Address.';
                    valid = false
                }
                if (landInput.trim() === '') {
                    landMessage.textContent = 'Enter the Landmark .';
                    valid = false
                }
                if (pinInput.trim() === '') {
                    pinMessage.textContent = 'Enter the Pincode.';
                    valid = false
                }
                if (cityInput.trim() === '') {
                    cityMessage.textContent = 'Enter your City.';
                    valid = false
                }
                if (distInput.trim() === '') {
                    districtMessage.textContent = 'Enter your District.';
                    valid = false
                }
                if (stateInput.trim() === '') {
                    stateMessage.textContent = 'Enter your City.';
                    valid = false
                }
                if (countryInput.trim() === '') {
                    countryMessage.textContent = 'Enter your City.';
                    valid = false
                }


                document.getElementById('Firstname').addEventListener('input', function () {
                    document.getElementById('FirstnameError').textContent = '';
                });

                document.getElementById('Lastname').addEventListener('input', function () {
                    document.getElementById('LastnameError').textContent = '';
                });
                document.getElementById('email').addEventListener('input', function () {
                    document.getElementById('emailError').textContent = '';
                });
                document.getElementById('houseNo').addEventListener('input', function () {
                    document.getElementById('houseNoError').textContent = '';
                });
                document.getElementById('street').addEventListener('input', function () {
                    document.getElementById('streetError').textContent = '';
                });
                document.getElementById('landmark').addEventListener('input', function () {
                    document.getElementById('landError').textContent = '';
                });
                document.getElementById('pincode').addEventListener('input', function () {
                    document.getElementById('pincodeError').textContent = '';
                });
                document.getElementById('city').addEventListener('input', function () {
                    document.getElementById('cityError').textContent = '';
                });
                document.getElementById('district').addEventListener('input', function () {
                    document.getElementById('districtError').textContent = '';
                });
                document.getElementById('State').addEventListener('input', function () {
                    document.getElementById('stateError').textContent = '';
                });
                document.getElementById('country').addEventListener('input', function () {
                    document.getElementById('countryError').textContent = '';
                });
                document.getElementById('phone').addEventListener('input', function () {
                    document.getElementById('phoneError').textContent = '';
                });

                return valid
            }

            async function removecoupon() {
                let removed = await fetch('/removeCoupon')
                if (removed.status === 205) {
                    await Swal.fire(
                        'Removed!',
                        'Coupon Removed Successfully',
                        'success'
                    )
                    location.reload()
                } else {
                    Swal.fire(
                        'Failed!',
                        'Coupon Remove Failed',
                        'Failed!'
                    )
                }
            }

            function validation2() {
                let valid = true
                const emailInput = document.getElementById('editemail').value
                const firstInput = document.getElementById('editFirstname').value
                const lastInput = document.getElementById('editLastname').value
                const houseInput = document.getElementById('editHouseNo').value
                const streetInput = document.getElementById('editStreet').value
                const landInput = document.getElementById('Landmark').value
                const pinInput = document.getElementById('editpincode').value
                const cityInput = document.getElementById('editcity').value
                const distInput = document.getElementById('editdistrict').value
                const stateInput = document.getElementById('editState').value
                const countryInput = document.getElementById('editcountry').value
                const phoneInput = document.getElementById('editphone').value

                const emailMessage = document.getElementById('editemailError');
                const firstMessage = document.getElementById('editfirstError');
                const lstnameMessage = document.getElementById('editlastError');
                const houseMessage = document.getElementById('edithouseNoError');
                const streetMessage = document.getElementById('editstreetError');
                const landMessage = document.getElementById('editLandmarkError');
                const pinMessage = document.getElementById('editpincodeError');
                const cityMessage = document.getElementById('editcityError');
                const districtMessage = document.getElementById('editdistrictError');
                const stateMessage = document.getElementById('editstateError');
                const countryMessage = document.getElementById('editcountryError');
                const phoneMessage = document.getElementById('editphoneError');

                emailMessage.textContent = '';
                firstMessage.textContent = '';
                lstnameMessage.textContent = '';
                houseMessage.textContent = '';
                streetMessage.textContent = '';
                landMessage.textContent = '';
                pinMessage.textContent = '';
                cityMessage.textContent = '';
                districtMessage.textContent = '';
                stateMessage.textContent = '';
                countryMessage.textContent = '';
                phoneMessage.textContent = '';

                if (!/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(emailInput)) {
                    emailMessage.textContent = ' enter a valid email address.';
                    valid = false
                }

                if (!/^\d{10}$/.test(phoneInput)) {
                    phoneMessage.textContent = 'Enter a valid 10-digit number.';
                    valid = false;
                }

                // Validate the password field
                if (lastInput.length > 10) {
                    lstnameMessage.textContent = 'your Lastname is Too Long.';
                    valid = false
                } else if (lastInput.trim() === '') {
                    lstnameMessage.textContent = 'Enter your Lastname.';
                    valid = false
                }
                if (firstInput.length > 15) {
                    firstMessage.textContent = 'your Firstname is Too Long.';
                    valid = false
                } else if (firstInput.trim() === '') {
                    firstMessage.textContent = 'Enter your Firstname.';
                    valid = false
                }

                if (houseInput.trim() === '') {
                    houseMessage.textContent = 'Enter your house/Building number.';
                    valid = false
                }
                if (streetInput.trim() === '') {
                    streetMessage.textContent = 'Enter the street Address.';
                    valid = false
                }
                if (landInput.trim() === '') {
                    landMessage.textContent = 'Enter the Landmark .';
                    valid = false
                }
                if (pinInput.trim() === '') {
                    pinMessage.textContent = 'Enter the Pincode.';
                    valid = false
                }
                if (cityInput.trim() === '') {
                    cityMessage.textContent = 'Enter your City.';
                    valid = false
                }
                if (distInput.trim() === '') {
                    districtMessage.textContent = 'Enter your District.';
                    valid = false
                }
                if (stateInput.trim() === '') {
                    stateMessage.textContent = 'Enter your City.';
                    valid = false
                }
                if (countryInput.trim() === '') {
                    countryMessage.textContent = 'Enter your City.';
                    valid = false
                }


                document.getElementById('editFirstname').addEventListener('input', function () {
                    document.getElementById('editfirstError').textContent = '';
                });

                document.getElementById('editLastname').addEventListener('input', function () {
                    document.getElementById('editlastError').textContent = '';
                });
                document.getElementById('email').addEventListener('input', function () {
                    document.getElementById('editemailError').textContent = '';
                });
                document.getElementById('editHouseNo').addEventListener('input', function () {
                    document.getElementById('edithouseNoError').textContent = '';
                });
                document.getElementById('editStreet').addEventListener('input', function () {
                    document.getElementById('editstreetError').textContent = '';
                });
                document.getElementById('Landmark').addEventListener('input', function () {
                    document.getElementById('editLandmarkError').textContent = '';
                });
                document.getElementById('pincode').addEventListener('input', function () {
                    document.getElementById('editpincodeError').textContent = '';
                });
                document.getElementById('city').addEventListener('input', function () {
                    document.getElementById('editcityError').textContent = '';
                });
                document.getElementById('district').addEventListener('input', function () {
                    document.getElementById('editdistrictError').textContent = '';
                });
                document.getElementById('editState').addEventListener('input', function () {
                    document.getElementById('editstateError').textContent = '';
                });
                document.getElementById('country').addEventListener('input', function () {
                    document.getElementById('editcountryError').textContent = '';
                });
                document.getElementById('phone').addEventListener('input', function () {
                    document.getElementById('editphoneError').textContent = '';
                });

                return valid
            }

        </script>